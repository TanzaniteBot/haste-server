{"version":3,"sources":["application.js"],"sourcesContent":["// @ts-check\n/* global $, hljs, window, document */\n\n/**\n * represents a single document\n */\nclass haste_document {\n\tconstructor(app) {\n\t\tthis.locked = false;\n\t\tthis.app = app;\n\t}\n\n\t// Escapes HTML tag characters\n\thtmlEscape(s) {\n\t\treturn s.replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/\"/g, '&quot;');\n\t}\n\n\t// Get this document from the server and lock it here\n\tload(key, callback, lang) {\n\t\t$.ajax(this.app.baseUrl + 'documents/' + key, {\n\t\t\ttype: 'get',\n\t\t\tdataType: 'json',\n\t\t\tsuccess: res => {\n\t\t\t\tthis.locked = true;\n\t\t\t\tthis.key = key;\n\t\t\t\tthis.data = res.data;\n\t\t\t\ttry {\n\t\t\t\t\tvar high;\n\t\t\t\t\tif (lang === 'txt') {\n\t\t\t\t\t\thigh = { value: this.htmlEscape(res.data) };\n\t\t\t\t\t} else if (lang) {\n\t\t\t\t\t\thigh = hljs.highlight(res.data, { language: lang });\n\t\t\t\t\t} else {\n\t\t\t\t\t\thigh = hljs.highlightAuto(res.data);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// failed highlight, fall back on auto\n\t\t\t\t\thigh = hljs.highlightAuto(res.data);\n\t\t\t\t}\n\t\t\t\tcallback({\n\t\t\t\t\tvalue: high.value,\n\t\t\t\t\tkey: key,\n\t\t\t\t\tlanguage: high.language || lang,\n\t\t\t\t\tlineCount: res.data.split('\\n').length\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tcallback(false);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Save this document to the server and lock it here\n\tsave(data, callback) {\n\t\tif (this.locked) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.data = data;\n\t\t$.ajax(this.app.baseUrl + 'documents', {\n\t\t\ttype: 'post',\n\t\t\tdata: data,\n\t\t\tdataType: 'json',\n\t\t\tcontentType: 'text/plain; charset=utf-8',\n\t\t\tsuccess: res => {\n\t\t\t\tthis.locked = true;\n\t\t\t\tthis.key = res.key;\n\t\t\t\tconst high = hljs.highlightAuto(data);\n\t\t\t\tcallback(null, {\n\t\t\t\t\tvalue: high.value,\n\t\t\t\t\tkey: res.key,\n\t\t\t\t\tlanguage: high.language,\n\t\t\t\t\tlineCount: data.split('\\n').length\n\t\t\t\t});\n\t\t\t},\n\t\t\terror: res => {\n\t\t\t\ttry {\n\t\t\t\t\tcallback($.parseJSON(res.responseText));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcallback({ message: 'Something went wrong!' });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * represents the paste application\n */\nclass haste {\n\t// Map of common extensions\n\t// Note: this list does not need to include anything that IS its extension,\n\t// due to the behavior of lookupTypeByExtension and lookupExtensionByType\n\t// Note: optimized for lookupTypeByExtension\n\tstatic extensionMap = {\n\t\trb: 'ruby',\n\t\tpy: 'python',\n\t\tpl: 'perl',\n\t\tphp: 'php',\n\t\tscala: 'scala',\n\t\tgo: 'go',\n\t\txml: 'xml',\n\t\thtml: 'xml',\n\t\thtm: 'xml',\n\t\tcss: 'css',\n\t\tjs: 'javascript',\n\t\tvbs: 'vbscript',\n\t\tlua: 'lua',\n\t\tpas: 'delphi',\n\t\tjava: 'java',\n\t\tcpp: 'cpp',\n\t\tcc: 'cpp',\n\t\tm: 'objectivec',\n\t\tvala: 'vala',\n\t\tsql: 'sql',\n\t\tsm: 'smalltalk',\n\t\tlisp: 'lisp',\n\t\tini: 'ini',\n\t\tdiff: 'diff',\n\t\tbash: 'bash',\n\t\tsh: 'bash',\n\t\ttex: 'tex',\n\t\terl: 'erlang',\n\t\ths: 'haskell',\n\t\tmd: 'markdown',\n\t\ttxt: '',\n\t\tcoffee: 'coffee',\n\t\tswift: 'swift'\n\t};\n\n\tconstructor(appName, options) {\n\t\tthis.appName = appName;\n\t\tthis.$textarea = $('textarea');\n\t\tthis.$box = $('#box');\n\t\tthis.$code = $('#box code');\n\t\tthis.$linenos = $('#linenos');\n\t\tthis.options = options;\n\t\tthis.configureShortcuts();\n\t\tthis.configureButtons();\n\t\t// If twitter is disabled, hide the button\n\t\tif (!options.twitter) {\n\t\t\t$('#box2 .twitter').hide();\n\t\t}\n\t\tthis.baseUrl = options.baseUrl || '/';\n\t}\n\n\t// Set the page title - include the appName\n\tsetTitle(ext) {\n\t\tconst title = ext ? this.appName + ' - ' + ext : this.appName;\n\t\tdocument.title = title;\n\t}\n\n\t// Show a message box\n\tshowMessage(msg, cls) {\n\t\tconst msgBox = $('<li class=\"' + (cls || 'info') + '\">' + msg + '</li>');\n\t\t$('#messages').prepend(msgBox);\n\t\tsetTimeout(() => {\n\t\t\tmsgBox.slideUp('fast', function () {\n\t\t\t\t$(this).remove();\n\t\t\t});\n\t\t}, 3000);\n\t}\n\n\t// Show the light key\n\tlightKey() {\n\t\tthis.configureKey(['new', 'save']);\n\t}\n\n\t// Show the full key\n\tfullKey() {\n\t\tthis.configureKey(['new', 'duplicate', 'twitter', 'raw']);\n\t}\n\n\t// Set the key up for certain things to be enabled\n\tconfigureKey(enable) {\n\t\tlet $this;\n\t\t$('#box2 .function').each(function () {\n\t\t\t$this = $(this);\n\t\t\tfor (let i = 0; i < enable.length; i++) {\n\t\t\t\tif ($this.hasClass(enable[i])) {\n\t\t\t\t\t$this.addClass('enabled');\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$this.removeClass('enabled');\n\t\t});\n\t}\n\n\t// Remove the current document (if there is one)\n\t// and set up for a new one\n\t/** @param {boolean} [hideHistory] */\n\tnewDocument(hideHistory) {\n\t\tthis.$box.hide();\n\t\tthis.doc = new haste_document(this);\n\t\tif (!hideHistory) {\n\t\t\twindow.history.pushState(null, this.appName, this.baseUrl);\n\t\t}\n\t\tthis.setTitle();\n\t\tthis.lightKey();\n\t\tthis.$textarea.val('').show('fast', function () {\n\t\t\tthis.focus();\n\t\t});\n\t\tthis.removeLineNumbers();\n\t}\n\n\t// Look up the extension preferred for a type\n\t// If not found, return the type itself - which we'll place as the extension\n\tlookupExtensionByType(type) {\n\t\tfor (let key in haste.extensionMap) {\n\t\t\tif (haste.extensionMap[key] === type) return key;\n\t\t}\n\t\treturn type;\n\t}\n\n\t// Look up the type for a given extension\n\t// If not found, return the extension - which we'll attempt to use as the type\n\tlookupTypeByExtension(ext) {\n\t\treturn haste.extensionMap[ext] || ext;\n\t}\n\n\t// Add line numbers to the document\n\t// For the specified number of lines\n\taddLineNumbers(lineCount) {\n\t\tlet h = '';\n\t\tfor (let i = 0; i < lineCount; i++) {\n\t\t\th += (i + 1).toString() + '<br/>';\n\t\t}\n\t\t$('#linenos').html(h);\n\t}\n\n\t// Remove the line numbers\n\tremoveLineNumbers() {\n\t\t$('#linenos').html('&gt;');\n\t}\n\n\t// Load a document and show it\n\tloadDocument(key) {\n\t\t// Split the key up\n\t\tconst parts = key.split('.', 2);\n\t\t// Ask for what we want\n\t\tthis.doc = new haste_document(this);\n\t\tthis.doc.load(\n\t\t\tparts[0],\n\t\t\tret => {\n\t\t\t\tif (ret) {\n\t\t\t\t\tthis.$code.html(ret.value);\n\t\t\t\t\tthis.setTitle(ret.key);\n\t\t\t\t\tthis.fullKey();\n\t\t\t\t\tthis.$textarea.val('').hide();\n\t\t\t\t\tthis.$box.show().focus();\n\t\t\t\t\tthis.addLineNumbers(ret.lineCount);\n\t\t\t\t} else {\n\t\t\t\t\tthis.newDocument();\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis.lookupTypeByExtension(parts[1])\n\t\t);\n\t}\n\n\t// Duplicate the current document - only if locked\n\tduplicateDocument() {\n\t\tif (this.doc.locked) {\n\t\t\tconst currentData = this.doc.data;\n\t\t\tthis.newDocument();\n\t\t\tthis.$textarea.val(currentData);\n\t\t}\n\t}\n\n\t// Lock the current document\n\tlockDocument() {\n\t\tthis.doc.save(this.$textarea.val(), (err, ret) => {\n\t\t\tif (err) {\n\t\t\t\tthis.showMessage(err.message, 'error');\n\t\t\t} else if (ret) {\n\t\t\t\tthis.$code.html(ret.value);\n\t\t\t\tthis.setTitle(ret.key);\n\t\t\t\tlet file = this.baseUrl + ret.key;\n\t\t\t\tif (ret.language) {\n\t\t\t\t\tfile += '.' + this.lookupExtensionByType(ret.language);\n\t\t\t\t}\n\t\t\t\twindow.history.pushState(null, this.appName + '-' + ret.key, file);\n\t\t\t\tthis.fullKey();\n\t\t\t\tthis.$textarea.val('').hide();\n\t\t\t\tthis.$box.show().focus();\n\t\t\t\tthis.addLineNumbers(ret.lineCount);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @typedef {Object} Button\n\t * @prop {JQuery<HTMLElement>} $where\n\t * @prop {string} label\n\t * @prop {string} shortcutDescription\n\t * @prop {(evt: any) => boolean} shortcut\n\t * @prop {() => void} action\n\t * @prop {boolean} [clickDisabled]\n\t */\n\n\tconfigureButtons() {\n\t\t/** @type {Button[]} */\n\t\tthis.buttons = [\n\t\t\t{\n\t\t\t\t$where: $('#box2 .save'),\n\t\t\t\tlabel: 'Save',\n\t\t\t\tshortcutDescription: 'control + s',\n\t\t\t\tshortcut: evt => evt.ctrlKey && evt.keyCode === 83,\n\t\t\t\taction: () => {\n\t\t\t\t\tif (this.$textarea.val().replace(/^\\s+|\\s+$/g, '') !== '') {\n\t\t\t\t\t\tthis.lockDocument();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t$where: $('#box2 .new'),\n\t\t\t\tlabel: 'New',\n\t\t\t\tshortcut: evt => evt.ctrlKey && evt.keyCode === 78,\n\t\t\t\tshortcutDescription: 'control + n',\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.newDocument(!this.doc.key);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t$where: $('#box2 .duplicate'),\n\t\t\t\tlabel: 'Duplicate & Edit',\n\t\t\t\tshortcut: evt => this.doc.locked && evt.ctrlKey && evt.keyCode === 68,\n\t\t\t\tshortcutDescription: 'control + d',\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.duplicateDocument();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t$where: $('#box2 .raw'),\n\t\t\t\tlabel: 'Just Text',\n\t\t\t\tshortcut: evt => evt.ctrlKey && evt.shiftKey && evt.keyCode === 82,\n\t\t\t\tshortcutDescription: 'control + shift + r',\n\t\t\t\taction: () => {\n\t\t\t\t\twindow.location.href = this.baseUrl + 'raw/' + this.doc.key;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t$where: $('#box2 .twitter'),\n\t\t\t\tlabel: 'Twitter',\n\t\t\t\tshortcut: evt => this.options.twitter && this.doc.locked && evt.shiftKey && evt.ctrlKey && evt.keyCode == 84,\n\t\t\t\tshortcutDescription: 'control + shift + t',\n\t\t\t\taction: () => {\n\t\t\t\t\twindow.open('https://twitter.com/share?url=' + encodeURI(window.location.href));\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor (let i = 0; i < this.buttons.length; i++) {\n\t\t\tthis.configureButton(this.buttons[i]);\n\t\t}\n\t}\n\n\t/**\n\t * @param {Button} options \n\t */\n\tconfigureButton(options) {\n\t\t// Handle the click action\n\t\toptions.$where.click(function (evt) {\n\t\t\tevt.preventDefault();\n\t\t\tif (!options.clickDisabled && $(this).hasClass('enabled')) {\n\t\t\t\toptions.action();\n\t\t\t}\n\t\t});\n\t\t// Show the label\n\t\toptions.$where.mouseenter(function () {\n\t\t\t$('#box3 .label').text(options.label);\n\t\t\t$('#box3 .shortcut').text(options.shortcutDescription || '');\n\t\t\t$('#box3').show();\n\t\t\t$(this).append($('#pointer').remove().show());\n\t\t});\n\t\t// Hide the label\n\t\toptions.$where.mouseleave(function () {\n\t\t\t$('#box3').hide();\n\t\t\t$('#pointer').hide();\n\t\t});\n\t}\n\n\t// Configure keyboard shortcuts for the textarea\n\tconfigureShortcuts() {\n\t\t$(document.body).keydown(evt => {\n\t\t\tfor (const button of this.buttons || []) {\n\t\t\t\tif (button.shortcut && button.shortcut(evt)) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbutton.action();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n///// Tab behavior in the textarea - 2 spaces per tab\n$(function () {\n\t$('textarea').keydown(function (evt) {\n\t\tif (evt.keyCode === 9) {\n\t\t\tevt.preventDefault();\n\t\t\tconst myValue = '  ';\n\t\t\t// http://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery\n\t\t\t// For browsers like Internet Explorer\n\t\t\tif (document.selection) {\n\t\t\t\tthis.focus();\n\t\t\t\tconst sel = document.selection.createRange();\n\t\t\t\tsel.text = myValue;\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t\t// Mozilla and Webkit\n\t\t\telse if (this.selectionStart || this.selectionStart == '0') {\n\t\t\t\tconst startPos = this.selectionStart;\n\t\t\t\tconst endPos = this.selectionEnd;\n\t\t\t\tconst scrollTop = this.scrollTop;\n\t\t\t\tthis.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos, this.value.length);\n\t\t\t\tthis.focus();\n\t\t\t\tthis.selectionStart = startPos + myValue.length;\n\t\t\t\tthis.selectionEnd = startPos + myValue.length;\n\t\t\t\tthis.scrollTop = scrollTop;\n\t\t\t} else {\n\t\t\t\tthis.value += myValue;\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t});\n});\n"],"names":["haste_document","constructor","app","locked","htmlEscape","s","replace","load","key","callback","lang","$","ajax","baseUrl","type","dataType","success","res","data","high","value","hljs","highlight","language","highlightAuto","err","lineCount","split","length","error","save","contentType","parseJSON","responseText","e","message","haste","extensionMap","rb","py","pl","php","scala","go","xml","html","htm","css","js","vbs","lua","pas","java","cpp","cc","m","vala","sql","sm","lisp","ini","diff","bash","sh","tex","erl","hs","md","txt","coffee","swift","appName","options","$textarea","$box","$code","$linenos","configureShortcuts","configureButtons","twitter","hide","setTitle","ext","title","document","showMessage","msg","cls","msgBox","prepend","setTimeout","slideUp","remove","lightKey","configureKey","fullKey","enable","$this","each","i","hasClass","addClass","removeClass","newDocument","hideHistory","doc","window","history","pushState","val","show","focus","removeLineNumbers","lookupExtensionByType","lookupTypeByExtension","addLineNumbers","h","toString","loadDocument","parts","ret","duplicateDocument","currentData","lockDocument","file","buttons","$where","label","shortcutDescription","shortcut","evt","ctrlKey","keyCode","action","shiftKey","location","href","open","encodeURI","configureButton","click","preventDefault","clickDisabled","mouseenter","text","append","mouseleave","body","keydown","button","selection","sel","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring"],"mappings":"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"}