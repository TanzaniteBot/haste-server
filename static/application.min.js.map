{"version":3,"sources":["application.js"],"sourcesContent":["/* global $, hljs, window, document */\n\n/**\n * represents a single document\n */\nclass haste_document {\n  constructor(app) {\n    this.locked = false;\n    this.app = app;\n  }\n\n  // Escapes HTML tag characters\n  htmlEscape(s) {\n    return s\n      .replace(/&/g, '&amp;')\n      .replace(/>/g, '&gt;')\n      .replace(/</g, '&lt;')\n      .replace(/\"/g, '&quot;');\n  }\n\n  // Get this document from the server and lock it here\n  load(key, callback, lang) {\n    var _this = this;\n    $.ajax(_this.app.baseUrl + 'documents/' + key, {\n      type: 'get',\n      dataType: 'json',\n      success: function (res) {\n        _this.locked = true;\n        _this.key = key;\n        _this.data = res.data;\n        try {\n          var high;\n          if (lang === 'txt') {\n            high = { value: _this.htmlEscape(res.data) };\n          }\n          else if (lang) {\n            high = hljs.highlight(res.data, { language: lang });\n          }\n          else {\n            high = hljs.highlightAuto(res.data);\n          }\n        } catch (err) {\n          // failed highlight, fall back on auto\n          high = hljs.highlightAuto(res.data);\n        }\n        callback({\n          value: high.value,\n          key: key,\n          language: high.language || lang,\n          lineCount: res.data.split('\\n').length\n        });\n      },\n      error: function () {\n        callback(false);\n      }\n    });\n  }\n  \n  // Save this document to the server and lock it here\n  save(data, callback) {\n    if (this.locked) {\n      return false;\n    }\n    this.data = data;\n    var _this = this;\n    $.ajax(_this.app.baseUrl + 'documents', {\n      type: 'post',\n      data: data,\n      dataType: 'json',\n      contentType: 'text/plain; charset=utf-8',\n      success: function (res) {\n        _this.locked = true;\n        _this.key = res.key;\n        var high = hljs.highlightAuto(data);\n        callback(null, {\n          value: high.value,\n          key: res.key,\n          language: high.language,\n          lineCount: data.split('\\n').length\n        });\n      },\n      error: function (res) {\n        try {\n          callback($.parseJSON(res.responseText));\n        }\n        catch (e) {\n          callback({ message: 'Something went wrong!' });\n        }\n      }\n    });\n  }\n}\n\n/** \n * represents the paste application\n */ \nclass haste {\n  // Map of common extensions\n  // Note: this list does not need to include anything that IS its extension,\n  // due to the behavior of lookupTypeByExtension and lookupExtensionByType\n  // Note: optimized for lookupTypeByExtension\n  static extensionMap = {\n    rb: 'ruby', py: 'python', pl: 'perl', php: 'php', scala: 'scala', go: 'go',\n    xml: 'xml', html: 'xml', htm: 'xml', css: 'css', js: 'javascript', vbs: 'vbscript',\n    lua: 'lua', pas: 'delphi', java: 'java', cpp: 'cpp', cc: 'cpp', m: 'objectivec',\n    vala: 'vala', sql: 'sql', sm: 'smalltalk', lisp: 'lisp', ini: 'ini',\n    diff: 'diff', bash: 'bash', sh: 'bash', tex: 'tex', erl: 'erlang', hs: 'haskell',\n    md: 'markdown', txt: '', coffee: 'coffee', swift: 'swift'\n  };\n\n  constructor(appName, options) {\n    this.appName = appName;\n    this.$textarea = $('textarea');\n    this.$box = $('#box');\n    this.$code = $('#box code');\n    this.$linenos = $('#linenos');\n    this.options = options;\n    this.configureShortcuts();\n    this.configureButtons();\n    // If twitter is disabled, hide the button\n    if (!options.twitter) {\n      $('#box2 .twitter').hide();\n    };\n    this.baseUrl = options.baseUrl || '/';\n  }\n\n  // Set the page title - include the appName\n  setTitle(ext) {\n    var title = ext ? this.appName + ' - ' + ext : this.appName;\n    document.title = title;\n  }\n\n  // Show a message box\n  showMessage(msg, cls) {\n    var msgBox = $('<li class=\"' + (cls || 'info') + '\">' + msg + '</li>');\n    $('#messages').prepend(msgBox);\n    setTimeout(function () {\n      msgBox.slideUp('fast', function () { $(this).remove(); });\n    }, 3000);\n  }\n\n  // Show the light key\n  lightKey() {\n    this.configureKey(['new', 'save']);\n  }\n\n  // Show the full key\n  fullKey() {\n    this.configureKey(['new', 'duplicate', 'twitter', 'raw']);\n  }\n\n  // Set the key up for certain things to be enabled\n  configureKey(enable) {\n    var $this, i = 0;\n    $('#box2 .function').each(function () {\n      $this = $(this);\n      for (i = 0; i < enable.length; i++) {\n        if ($this.hasClass(enable[i])) {\n          $this.addClass('enabled');\n          return true;\n        }\n      }\n      $this.removeClass('enabled');\n    });\n  }\n\n  // Remove the current document (if there is one)\n  // and set up for a new one\n  newDocument(hideHistory) {\n    this.$box.hide();\n    this.doc = new haste_document(this);\n    if (!hideHistory) {\n      window.history.pushState(null, this.appName, this.baseUrl);\n    }\n    this.setTitle();\n    this.lightKey();\n    this.$textarea.val('').show('fast', function () {\n      this.focus();\n    });\n    this.removeLineNumbers();\n  }\n\n  // Look up the extension preferred for a type\n  // If not found, return the type itself - which we'll place as the extension\n  lookupExtensionByType(type) {\n    for (var key in haste.extensionMap) {\n      if (haste.extensionMap[key] === type) return key;\n    }\n    return type;\n  }\n\n  // Look up the type for a given extension\n  // If not found, return the extension - which we'll attempt to use as the type\n  lookupTypeByExtension(ext) {\n    return haste.extensionMap[ext] || ext;\n  }\n\n  // Add line numbers to the document\n  // For the specified number of lines\n  addLineNumbers(lineCount) {\n    var h = '';\n    for (var i = 0; i < lineCount; i++) {\n      h += (i + 1).toString() + '<br/>';\n    }\n    $('#linenos').html(h);\n  }\n\n  // Remove the line numbers\n  removeLineNumbers() {\n    $('#linenos').html('&gt;');\n  }\n\n  // Load a document and show it\n  loadDocument(key) {\n    // Split the key up\n    var parts = key.split('.', 2);\n    // Ask for what we want\n    var _this = this;\n    _this.doc = new haste_document(this);\n    _this.doc.load(parts[0], function (ret) {\n      if (ret) {\n        _this.$code.html(ret.value);\n        _this.setTitle(ret.key);\n        _this.fullKey();\n        _this.$textarea.val('').hide();\n        _this.$box.show().focus();\n        _this.addLineNumbers(ret.lineCount);\n      }\n      else {\n        _this.newDocument();\n      }\n    }, this.lookupTypeByExtension(parts[1]));\n  }\n\n  // Duplicate the current document - only if locked\n  duplicateDocument() {\n    if (this.doc.locked) {\n      var currentData = this.doc.data;\n      this.newDocument();\n      this.$textarea.val(currentData);\n    }\n  }\n\n  // Lock the current document\n  lockDocument() {\n    var _this = this;\n    this.doc.save(this.$textarea.val(), function (err, ret) {\n      if (err) {\n        _this.showMessage(err.message, 'error');\n      }\n      else if (ret) {\n        _this.$code.html(ret.value);\n        _this.setTitle(ret.key);\n        var file = _this.baseUrl + ret.key;\n        if (ret.language) {\n          file += '.' + _this.lookupExtensionByType(ret.language);\n        }\n        window.history.pushState(null, _this.appName + '-' + ret.key, file);\n        _this.fullKey();\n        _this.$textarea.val('').hide();\n        _this.$box.show().focus();\n        _this.addLineNumbers(ret.lineCount);\n      }\n    });\n  }\n\n  configureButtons() {\n    var _this = this;\n    this.buttons = [\n      {\n        $where: $('#box2 .save'),\n        label: 'Save',\n        shortcutDescription: 'control + s',\n        shortcut: function (evt) {\n          return evt.ctrlKey && (evt.keyCode === 83);\n        },\n        action: function () {\n          if (_this.$textarea.val().replace(/^\\s+|\\s+$/g, '') !== '') {\n            _this.lockDocument();\n          }\n        }\n      },\n      {\n        $where: $('#box2 .new'),\n        label: 'New',\n        shortcut: function (evt) {\n          return evt.ctrlKey && evt.keyCode === 78;\n        },\n        shortcutDescription: 'control + n',\n        action: function () {\n          _this.newDocument(!_this.doc.key);\n        }\n      },\n      {\n        $where: $('#box2 .duplicate'),\n        label: 'Duplicate & Edit',\n        shortcut: function (evt) {\n          return _this.doc.locked && evt.ctrlKey && evt.keyCode === 68;\n        },\n        shortcutDescription: 'control + d',\n        action: function () {\n          _this.duplicateDocument();\n        }\n      },\n      {\n        $where: $('#box2 .raw'),\n        label: 'Just Text',\n        shortcut: function (evt) {\n          return evt.ctrlKey && evt.shiftKey && evt.keyCode === 82;\n        },\n        shortcutDescription: 'control + shift + r',\n        action: function () {\n          window.location.href = _this.baseUrl + 'raw/' + _this.doc.key;\n        }\n      },\n      {\n        $where: $('#box2 .twitter'),\n        label: 'Twitter',\n        shortcut: function (evt) {\n          return _this.options.twitter && _this.doc.locked && evt.shiftKey && evt.ctrlKey && evt.keyCode == 84;\n        },\n        shortcutDescription: 'control + shift + t',\n        action: function () {\n          window.open('https://twitter.com/share?url=' + encodeURI(window.location.href));\n        }\n      }\n    ];\n    for (var i = 0; i < this.buttons.length; i++) {\n      this.configureButton(this.buttons[i]);\n    }\n  }\n\n  configureButton(options) {\n    // Handle the click action\n    options.$where.click(function (evt) {\n      evt.preventDefault();\n      if (!options.clickDisabled && $(this).hasClass('enabled')) {\n        options.action();\n      }\n    });\n    // Show the label\n    options.$where.mouseenter(function () {\n      $('#box3 .label').text(options.label);\n      $('#box3 .shortcut').text(options.shortcutDescription || '');\n      $('#box3').show();\n      $(this).append($('#pointer').remove().show());\n    });\n    // Hide the label\n    options.$where.mouseleave(function () {\n      $('#box3').hide();\n      $('#pointer').hide();\n    });\n  }\n  \n  // Configure keyboard shortcuts for the textarea\n  configureShortcuts() {\n    var _this = this;\n    $(document.body).keydown(function (evt) {\n      var button;\n      for (var i = 0; i < _this.buttons.length; i++) {\n        button = _this.buttons[i];\n        if (button.shortcut && button.shortcut(evt)) {\n          evt.preventDefault();\n          button.action();\n          return;\n        }\n      }\n    });\n  }\n}\n\n///// Tab behavior in the textarea - 2 spaces per tab\n$(function() {\n\n  $('textarea').keydown(function(evt) {\n    if (evt.keyCode === 9) {\n      evt.preventDefault();\n      var myValue = '  ';\n      // http://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery\n      // For browsers like Internet Explorer\n      if (document.selection) {\n        this.focus();\n        var sel = document.selection.createRange();\n        sel.text = myValue;\n        this.focus();\n      }\n      // Mozilla and Webkit\n      else if (this.selectionStart || this.selectionStart == '0') {\n        var startPos = this.selectionStart;\n        var endPos = this.selectionEnd;\n        var scrollTop = this.scrollTop;\n        this.value = this.value.substring(0, startPos) + myValue +\n          this.value.substring(endPos,this.value.length);\n        this.focus();\n        this.selectionStart = startPos + myValue.length;\n        this.selectionEnd = startPos + myValue.length;\n        this.scrollTop = scrollTop;\n      }\n      else {\n        this.value += myValue;\n        this.focus();\n      }\n    }\n  });\n\n});\n"],"names":["haste_document","constructor","app","locked","htmlEscape","s","replace","load","key","callback","lang","_this","$","ajax","baseUrl","type","dataType","success","res","data","high","value","hljs","highlight","language","highlightAuto","err","lineCount","split","length","error","save","contentType","parseJSON","responseText","e","message","haste","extensionMap","rb","py","pl","php","scala","go","xml","html","htm","css","js","vbs","lua","pas","java","cpp","cc","m","vala","sql","sm","lisp","ini","diff","bash","sh","tex","erl","hs","md","txt","coffee","swift","appName","options","$textarea","$box","$code","$linenos","configureShortcuts","configureButtons","twitter","hide","setTitle","ext","title","document","showMessage","msg","cls","msgBox","prepend","setTimeout","slideUp","remove","lightKey","configureKey","fullKey","enable","$this","i","each","hasClass","addClass","removeClass","newDocument","hideHistory","doc","window","history","pushState","val","show","focus","removeLineNumbers","lookupExtensionByType","lookupTypeByExtension","addLineNumbers","h","toString","loadDocument","parts","ret","duplicateDocument","currentData","lockDocument","file","buttons","$where","label","shortcutDescription","shortcut","evt","ctrlKey","keyCode","action","shiftKey","location","href","open","encodeURI","configureButton","click","preventDefault","clickDisabled","mouseenter","text","append","mouseleave","body","keydown","button","selection","sel","createRange","selectionStart","startPos","endPos","selectionEnd","scrollTop","substring"],"mappings":"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"}